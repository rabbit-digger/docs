<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Inside | Rabbit Digger Pro</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="Rustç¼–å†™çš„çµæ´»ä»£ç†è½¯ä»¶.">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.f94f3034.css" as="style"><link rel="preload" href="/assets/js/app.877b83e3.js" as="script"><link rel="preload" href="/assets/js/3.04fda7a8.js" as="script"><link rel="preload" href="/assets/js/19.c0e76da1.js" as="script"><link rel="prefetch" href="/assets/js/10.b6749a19.js"><link rel="prefetch" href="/assets/js/11.758f9e0b.js"><link rel="prefetch" href="/assets/js/12.744ee856.js"><link rel="prefetch" href="/assets/js/13.59ea71f9.js"><link rel="prefetch" href="/assets/js/14.e236accb.js"><link rel="prefetch" href="/assets/js/15.b6df795d.js"><link rel="prefetch" href="/assets/js/16.aa8f55db.js"><link rel="prefetch" href="/assets/js/17.ec6abd26.js"><link rel="prefetch" href="/assets/js/18.cec55d8d.js"><link rel="prefetch" href="/assets/js/20.34395ede.js"><link rel="prefetch" href="/assets/js/4.d5fc930d.js"><link rel="prefetch" href="/assets/js/5.5839940d.js"><link rel="prefetch" href="/assets/js/6.834b3a03.js"><link rel="prefetch" href="/assets/js/7.bb6a00e0.js"><link rel="prefetch" href="/assets/js/8.15da4a15.js"><link rel="prefetch" href="/assets/js/9.a90e17e8.js"><link rel="prefetch" href="/assets/js/vendors~flowchart.c91ff7d0.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f94f3034.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/zh-CN/" class="home-link router-link-active"><!----> <span class="site-name">Rabbit Digger Pro</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/zh-CN/guide/" class="nav-link">
  æŒ‡å—
</a></div><div class="nav-item"><a href="/zh-CN/config/" class="nav-link">
  é…ç½®
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">é€‰æ‹©è¯­è¨€</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">é€‰æ‹©è¯­è¨€</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link">
  English
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/inside/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  ç®€ä½“ä¸­æ–‡
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/zh-CN/guide/" class="nav-link">
  æŒ‡å—
</a></div><div class="nav-item"><a href="/zh-CN/config/" class="nav-link">
  é…ç½®
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">é€‰æ‹©è¯­è¨€</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">é€‰æ‹©è¯­è¨€</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link">
  English
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/inside/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  ç®€ä½“ä¸­æ–‡
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Inside</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zh-CN/inside/#net" class="sidebar-link">Net</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/zh-CN/inside/#netref" class="sidebar-link">NetRef</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/zh-CN/inside/#externalfile" class="sidebar-link">ExternalFile</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/zh-CN/inside/#config-å¤„ç†æµ" class="sidebar-link">Config å¤„ç†æµ</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="inside"><a href="#inside" class="header-anchor">#</a> Inside</h1> <p><code>rabbit-digger</code> å†…éƒ¨çš„ç§˜å¯†ğŸ°...</p> <h2 id="net"><a href="#net" class="header-anchor">#</a> Net</h2> <p><code>Net</code> æ˜¯ <code>rabbit-digger</code> çš„æ ¸å¿ƒæ¦‚å¿µ. æ¯ä¸ªä»£ç†åè®®éƒ½æ˜¯æ ¹æ®ä¸€ä¸ªé…ç½®(å¦‚ä»£ç†æœåŠ¡å™¨åœ°å€, è®¤è¯æ–¹å¼, åŸºäºçš„ <code>Net</code>) æ„é€ ä¸€ä¸ªæ–°çš„ <code>Net</code>. è¿™ä¸ª <code>Net</code> æä¾›äº† <code>tcp_connect</code> å’Œ <code>udp_bind</code>, å¯¹ä½¿ç”¨è€…éšè—äº†æœåŠ¡å™¨çš„è¿æ¥ç»†èŠ‚, èƒ½å¤Ÿè®©ä½¿ç”¨è€…ç›´æ¥è°ƒç”¨ <code>tcp_connect</code> å’Œ <code>udp_bind</code>.</p> <p><code>Net</code> çš„å®ç°è€…ä¸åº”è¯¥ä½¿ç”¨å¼‚æ­¥è¿è¡Œæ—¶æä¾›çš„ <code>TcpStream</code> å’Œ <code>UdpSocket</code> æ¥è¿æ¥ä»£ç†æœåŠ¡å™¨. è€Œæ˜¯åº”è¯¥åœ¨ <code>Config</code> ä¸­å£°æ˜ <code>NetRef</code>, ç„¶åä½¿ç”¨è¿™ä¸ª <code>Net</code> æ¥è¿æ¥ä»£ç†æœåŠ¡å™¨.</p> <p>å› æ­¤, æ¯ä¸ªä»£ç†åè®®éƒ½èƒ½å¤Ÿäº’ç›¸åµŒå¥—, è‡ªç„¶çš„å®ç°äº†ä»£ç†é“¾.</p> <h2 id="netref"><a href="#netref" class="header-anchor">#</a> NetRef</h2> <p><code>NetRef</code> æ˜¯ä¸€ä¸ª <code>enum</code>, æœ‰ <code>String</code> å’Œ <code>Net</code> ä¸¤ç§çŠ¶æ€. å½“ <code>Config</code> ä»æ–‡ä»¶è¯»å…¥æ—¶, <code>NetRef</code> æ˜¯ä¸€ä¸ªæœªè§£æçš„å­—ç¬¦ä¸². è€Œ <code>rabbit-digger</code> ä¼šæ ¹æ®å¼•ç”¨å…³ç³»ä¸€æ¬¡å°† <code>NetRef</code> è§£ææˆ <code>Net</code> å®ä¾‹, ç„¶åä¼ ç»™ <code>NetFactory::new</code>.</p> <h2 id="externalfile"><a href="#externalfile" class="header-anchor">#</a> ExternalFile</h2> <p><code>ExternalFile</code> å¯ç”¨åœ¨ <code>Config</code> ä¸­. ä»£è¡¨ç€è¿™ä¸ªå­—æ®µæ˜¯ä¸€ä¸ªå¤–éƒ¨çš„æ–‡ä»¶. <code>ExternalFile</code> å¯ä»¥æ˜¯æ–‡ä»¶, ä¹Ÿå¯ä»¥æ˜¯ <code>Url</code>. å½“ <code>ExternalFile</code> æ˜¯æ–‡ä»¶ä¸” <code>watch</code> ä¸º <code>true</code> æ—¶, <code>Net</code> ä¼šåœ¨æ–‡ä»¶å˜æ›´æ—¶è¢«é‡å»º. å½“ <code>Url</code> å’Œ <code>interval</code> è¢«è®¾ç½®æ—¶, æ–‡ä»¶ä¼šè¢«è½®è¯¢, å¹¶ä¸”åœ¨æ”¹å˜æ—¶é‡å»º <code>Net</code>.</p> <h2 id="config-å¤„ç†æµ"><a href="#config-å¤„ç†æµ" class="header-anchor">#</a> Config å¤„ç†æµ</h2> <p>æ‰€æœ‰ <code>Config</code> ç±»å‹éƒ½å®ç°äº† <code>Config</code> trait, <code>rabbit-digger</code> ä¼šåœ¨åŠ è½½ <code>Net</code> æ—¶è°ƒç”¨ <code>Config::visit</code> æ¥è®¿é—®å†…éƒ¨çš„å­—æ®µ, å¹¶å¡«å…¥æ‰€æœ‰çš„ <code>NetRef</code>, <code>ExternalFile</code>. åœ¨å¡«å…¥ <code>ExternalFile</code> çš„æ—¶å€™ä¼šè®°å½•æ‰€æœ‰ä½¿ç”¨åˆ°çš„æ–‡ä»¶, å¹¶åœ¨æ–‡ä»¶å˜åŠ¨çš„æ—¶å€™é‡æ–°æ„å»º <code>Net</code>.</p> <div class="language-flow extra-class"><pre class="language-flow"><code>input<span class="token operator">=&gt;</span>inputoutput<span class="token operator">:</span> Config<span class="token punctuation">.</span>yaml
mkctx<span class="token operator">=&gt;</span>operation<span class="token operator">:</span> åˆ›å»ºé…ç½®ä¸Šä¸‹æ–‡<span class="token punctuation">,</span> ç”¨äºä¿å­˜ Config ä¾èµ–çš„æ–‡ä»¶
<span class="token keyword">import</span><span class="token operator">=&gt;</span>operation<span class="token operator">:</span> å¤„ç† Import å­—æ®µ
build<span class="token operator">=&gt;</span>operation<span class="token operator">:</span> æ„é€  Net å’Œ Server
cond<span class="token operator">=&gt;</span>condition<span class="token operator">:</span> ä¾èµ–çš„æ–‡ä»¶
æ˜¯å¦æ”¹å˜<span class="token operator">?</span>
run_server<span class="token operator">=&gt;</span>operation<span class="token operator">:</span> è¿è¡Œ Server
ç›´åˆ°æ‰€æœ‰Serveråœæ­¢

input<span class="token operator">-</span><span class="token operator">&gt;</span>mkctx<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token keyword">import</span><span class="token operator">-</span><span class="token operator">&gt;</span>build<span class="token operator">-</span><span class="token operator">&gt;</span>run_server<span class="token operator">-</span><span class="token operator">&gt;</span>cond

<span class="token function">cond</span><span class="token punctuation">(</span>yes<span class="token punctuation">,</span>left<span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span>mkctx
<span class="token function">cond</span><span class="token punctuation">(</span>no<span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span>run_server

</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2021/9/28 ä¸‹åˆ11:35:59</span></div></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.877b83e3.js" defer></script><script src="/assets/js/3.04fda7a8.js" defer></script><script src="/assets/js/19.c0e76da1.js" defer></script>
  </body>
</html>
